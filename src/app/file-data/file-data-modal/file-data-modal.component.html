<clr-modal
  (clrModalOpenChange)="close()"
  [(clrModalOpen)]="isOpen"
  [clrModalSize]="'xl'"
  [clrModalStaticBackdrop]="false"
>
  <h3 class="modal-title" *ngIf="fileData$ | async as fileData">{{ fileData.fileName }}</h3>

  <div class="modal-body" *ngIf="fileData$ | async as fileData">
    <div class="clr-row">
      <div class="clr-col-xl-7 clr-col-sm-12">
        <div class="picture-center">
          <div #arrL class="slider__btn slider__btn--left" (click)="previous()">
            <cds-icon shape="angle" direction="left"></cds-icon>
          </div>
          <clr-spinner *ngIf="loading"></clr-spinner>
          <img
            #imageRotate
            class="modal-image"
            *ngIf="fileData"
            [src]="fileData | fileDataPreview: 1080"
            alt="{{ fileData.fileName }}"
            [hidden]="loading"
            (load)="loading = false"
          />
          <div #arrR class="slider__btn slider__btn--right" (click)="next()">
            <cds-icon shape="angle" direction="right"></cds-icon>
          </div>
        </div>
      </div>
      <div class="clr-col-xl-5 clr-col-sm-12">
        <div>
          <button (click)="downloadImage(fileData)" class="btn btn-info-outline" style="float: right">
            <cds-icon shape="download"></cds-icon>
          </button>
        </div>
        <div style="margin-top: 0">
          <button (click)="rotateImg()" class="btn btn-info-outline" style="float: right">
            <cds-icon shape="refresh"></cds-icon>
          </button>
        </div>
        <div class="row">
          <table *ngIf="meta" class="table table-compact table-noborder">
            <caption>
              {{
                fileData?.fileName
              }}
            </caption>
            <thead>
              <tr>
                <th class="right">Information</th>
                <th class="left" (click)="isShown = !isShown" style="cursor: pointer">
                  <a *ngIf="!isShown"> Show More</a>
                  <a *ngIf="isShown"> Show Less</a>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="right">Format</td>
                <td class="left">{{ meta.format }}</td>
              </tr>
              <tr>
                <td class="right">File Size</td>
                <td class="left">{{ fileData?.sizeBytes | appPrettyBytes }}</td>
              </tr>
              <tr>
                <td class="right">Resolution</td>
                <td class="left">{{ meta.geometry }}</td>
              </tr>
              <tr>
                <td class="right">Date Created</td>
                <td class="left">{{ fileData?.createdAt | appDate }}</td>
              </tr>
              <tr>
                <td class="right">Date Modified</td>
                <td class="left">{{ meta.modifiedDate | appDate }}</td>
              </tr>

              <tr *ngIf="isShown">
                <td class="right">Date Created</td>
                <td class="left">{{ fileData?.createdAt }}</td>
              </tr>
              <tr *ngIf="isShown">
                <td class="right">Date Modified</td>
                <td class="left">{{ meta.modifiedDate | appDate }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</clr-modal>
